<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CYBERTRUMP</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Black+Han+Sans&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #000;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
  }

  #svg-filters { position: absolute; width: 0; height: 0; }

  /* ── black opening screen ── */
  #blackscreen {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #cursor-text {
    font-family: 'Share Tech Mono', monospace;
    color: #1a1a1a;
    font-size: 13px;
    letter-spacing: 4px;
    opacity: 0;
    animation: fadeInText 1s ease forwards 1.5s;
    user-select: none;
  }
  @keyframes fadeInText { to { opacity: 1; color: #222; } }

  /* ── image layers ── */
  .img-layer {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    opacity: 0;
  }

  .img-layer img {
    height: 100vh;
    width: auto;
    max-width: 100vw;
    object-fit: contain;
    display: block;
    position: relative;
    z-index: 2;
  }

  /* red side glow for the black bars */
  .img-layer::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 35% 80% at 0% 50%,   rgba(160,0,0,0.22) 0%, transparent 70%),
      radial-gradient(ellipse 35% 80% at 100% 50%,  rgba(160,0,0,0.22) 0%, transparent 70%);
    pointer-events: none;
    z-index: 1;
  }

  #layer-shocked { z-index: 5; }
  #layer-salute  { z-index: 4; }
  #layer-back    { z-index: 3; }

  /* ── flag video ── */
  #flag-video {
    position: fixed;
    inset: 0;
    z-index: 2;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  #flag-video video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* ── flash ── */
  #flash {
    position: fixed;
    inset: 0;
    background: #fff;
    z-index: 200;
    opacity: 0;
    pointer-events: none;
  }

  /* ── scanlines ── */
  #scanlines {
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent, transparent 2px,
      rgba(255,0,0,0.04) 2px, rgba(255,0,0,0.04) 4px
    );
    z-index: 6;
    pointer-events: none;
    opacity: 0;
  }

  /* ── vignette ── */
  #vignette {
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 35%, #000 100%);
    z-index: 8;
    opacity: 0;
    pointer-events: none;
  }

  /* ── glitch burst ── */
  #glitch-img {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 7;
    opacity: 0;
    pointer-events: none;
  }
  #glitch-img img {
    height: 100vh;
    width: auto;
    max-width: 100vw;
    object-fit: contain;
    filter: hue-rotate(90deg) contrast(2.5) saturate(3);
  }
  @keyframes glitch {
    0%   { clip-path: inset(0 0 92% 0);   transform: translate(-12px, 0); }
    20%  { clip-path: inset(25% 0 55% 0); transform: translate(12px, 0); }
    40%  { clip-path: inset(60% 0 18% 0); transform: translate(-6px, 0); }
    60%  { clip-path: inset(8% 0 78% 0);  transform: translate(6px, 0); }
    80%  { clip-path: inset(78% 0 4% 0);  transform: translate(-12px, 0); }
    100% { clip-path: inset(0 0 0 0);     transform: translate(0, 0); }
  }

  /* ── title ── */
  #text-overlay {
    position: fixed;
    bottom: 4vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9;
    text-align: center;
    opacity: 0;
    pointer-events: none;
    white-space: nowrap;
  }
  #text-overlay h1 {
    font-family: 'Black Han Sans', sans-serif;
    font-size: clamp(44px, 9vw, 130px);
    color: #ff0000;
    text-shadow:
      0 0 20px #ff0000,
      0 0 60px #ff000077,
      3px 3px 0 #000,
      -3px -3px 0 #000;
    letter-spacing: -2px;
    line-height: 1;
  }
  #text-overlay p {
    font-family: 'Share Tech Mono', monospace;
    font-size: clamp(10px, 1.5vw, 15px);
    color: #fff;
    letter-spacing: 7px;
    margin-top: 8px;
    text-shadow: 0 0 12px #ff0000;
  }

  /* ── screen shake ── */
  @keyframes shake {
    0%   { transform: translate(0,0) rotate(0deg); }
    10%  { transform: translate(-30px,-20px) rotate(-2deg); }
    20%  { transform: translate(30px,20px) rotate(2deg); }
    30%  { transform: translate(-25px,25px) rotate(-1.5deg); }
    40%  { transform: translate(25px,-25px) rotate(1.5deg); }
    50%  { transform: translate(-15px,15px) rotate(-2deg); }
    60%  { transform: translate(15px,-10px) rotate(2deg); }
    70%  { transform: translate(-10px,10px) rotate(-1deg); }
    80%  { transform: translate(10px,-5px) rotate(1deg); }
    90%  { transform: translate(-5px,5px) rotate(0deg); }
    100% { transform: translate(0,0) rotate(0deg); }
  }
</style>
</head>
<body>

<!-- SVG warp filter -->
<svg id="svg-filters" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="warp-filter" x="-25%" y="-25%" width="150%" height="150%">
      <feTurbulence id="turb" type="turbulence"
        baseFrequency="0.012 0.012" numOctaves="3" seed="5" result="noise"/>
      <feDisplacementMap id="dispMap" in="SourceGraphic" in2="noise"
        scale="0" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </defs>
</svg>

<div id="blackscreen">
  <span id="cursor-text">· · ·</span>
</div>

<div id="flash"></div>

<!-- Flag video sits at the very back -->
<div id="flag-video">
  <video autoplay loop muted playsinline>
    <source src="freestock_1409812.mp4" type="video/mp4">
  </video>
</div>

<!-- Image layers, back to front -->
<div class="img-layer" id="layer-back">
  <img src="CT-Back.png" alt="CYBERTRUMP back">
</div>

<div class="img-layer" id="layer-salute">
  <img src="CT-Hand.png" alt="CYBERTRUMP salute">
</div>

<div class="img-layer" id="layer-shocked">
  <img src="CT-Shocked.png" alt="CYBERTRUMP shocked">
</div>

<div id="glitch-img">
  <img src="CT-Shocked.png" alt="">
</div>

<div id="scanlines"></div>
<div id="vignette"></div>

<div id="text-overlay">
  <h1>CYBERTRUMP</h1>
  <p>MAKE AMERICA GREAT AGAIN</p>
</div>

<script>
  const blackscreen  = document.getElementById('blackscreen');
  const flash        = document.getElementById('flash');
  const layerShocked = document.getElementById('layer-shocked');
  const layerSalute  = document.getElementById('layer-salute');
  const layerBack    = document.getElementById('layer-back');
  const flagVideo    = document.getElementById('flag-video');
  const glitchImg    = document.getElementById('glitch-img');
  const scanlines    = document.getElementById('scanlines');
  const vignette     = document.getElementById('vignette');
  const textOverlay  = document.getElementById('text-overlay');
  const turb         = document.getElementById('turb');
  const dispMap      = document.getElementById('dispMap');
  const body         = document.body;

  function fade(el, to, ms) {
    el.style.transition = ms ? `opacity ${ms}ms ease` : 'none';
    el.style.opacity = to;
  }

  // Warp morph: distorts outgoing image with turbulence displacement
  // while ingoing image is already visible underneath
  function warpMorph(outLayer, duration, onDone) {
    let start = null;
    const peakAt = 0.4; // displacement peaks at 40% through

    outLayer.querySelector('img').style.filter = 'url(#warp-filter)';

    function step(ts) {
      if (!start) start = ts;
      const t = Math.min((ts - start) / duration, 1);

      // Bell curve for displacement — rises then falls
      const bell = t < peakAt
        ? t / peakAt
        : 1 - ((t - peakAt) / (1 - peakAt));

      const scale = bell * 140;
      dispMap.setAttribute('scale', scale);

      // Turbulence frequency shifts — more organic feel
      const freq = 0.012 + bell * 0.045;
      turb.setAttribute('baseFrequency', `${freq} ${(freq * 0.7).toFixed(4)}`);

      // Outgoing fades out starting halfway through
      if (t > 0.45) {
        outLayer.style.opacity = Math.max(0, 1 - ((t - 0.45) / 0.55));
      }

      if (t < 1) {
        requestAnimationFrame(step);
      } else {
        outLayer.style.opacity = '0';
        outLayer.querySelector('img').style.filter = '';
        dispMap.setAttribute('scale', 0);
        turb.setAttribute('baseFrequency', '0.012 0.012');
        if (onDone) onDone();
      }
    }

    requestAnimationFrame(step);
  }

  // ── MAIN TIMELINE ──
  setTimeout(() => {

    // 1. White flash
    fade(flash, 1, 50);
    setTimeout(() => fade(flash, 0, 150), 80);

    // 2. Kill black screen, slam shocked in
    blackscreen.style.transition = 'opacity 0.05s';
    blackscreen.style.opacity = '0';
    setTimeout(() => blackscreen.style.display = 'none', 100);
    layerShocked.style.opacity = '1';

    // 3. Shake
    body.style.animation = 'shake 0.5s ease forwards';
    setTimeout(() => body.style.animation = '', 500);

    // 4. Glitch burst
    glitchImg.style.opacity = '1';
    glitchImg.style.animation = 'glitch 0.32s steps(1) forwards';
    setTimeout(() => { glitchImg.style.opacity = '0'; glitchImg.style.animation = ''; }, 340);

    // 5. Second flash
    setTimeout(() => {
      fade(flash, 0.65, 30);
      setTimeout(() => fade(flash, 0, 200), 55);
    }, 160);

    // 6. Scanlines + vignette
    setTimeout(() => {
      fade(scanlines, 1, 400);
      fade(vignette, 1, 900);
    }, 400);

    // 7. Hold on shocked, then WARP → salute
    setTimeout(() => {
      layerSalute.style.opacity = '1'; // visible underneath before warp starts
      warpMorph(layerShocked, 1800, () => {

        // 8. Hold on salute, then WARP → back + flag
        setTimeout(() => {
          // Fade flag video in, reveal back layer underneath salute
          fade(flagVideo, 1, 400);
          layerBack.style.opacity = '1';

          warpMorph(layerSalute, 1800, () => {

            // 9. Final state — CT-Back + flag — fade in title
            setTimeout(() => {
              textOverlay.style.transition = 'opacity 0.7s ease, bottom 0.7s ease';
              textOverlay.style.opacity = '1';
              textOverlay.style.bottom = '6vh';
            }, 300);

          });
        }, 2800); // hold on salute for 2.8s
      });
    }, 2200); // hold on shocked for 2.2s

  }, 3500); // 3.5s black screen
</script>
</body>
</html>
