<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CYBERTRUMP</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Black+Han+Sans&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #000;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
  }

  /* ══════════════════════════════
     ACTIVATE SCREEN
  ══════════════════════════════ */
  #activate-screen {
    position: fixed;
    inset: 0;
    z-index: 300;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }

  #activate-title {
    font-family: 'Black Han Sans', sans-serif;
    font-size: clamp(36px, 7vw, 100px);
    color: #ff0000;
    text-shadow:
      0 0 20px #ff0000,
      0 0 60px #ff000077,
      3px 3px 0 #000,
      -3px -3px 0 #000;
    letter-spacing: -1px;
    line-height: 1;
    text-align: center;
    animation: flicker 3s infinite;
  }

  @keyframes flicker {
    0%, 95%, 100% { opacity: 1; }
    96%            { opacity: 0.7; }
    97%            { opacity: 1; }
    98%            { opacity: 0.5; }
    99%            { opacity: 1; }
  }

  #trump-click-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
    cursor: pointer;
  }

  #trump-click {
    height: clamp(180px, 40vh, 380px);
    width: auto;
    object-fit: contain;
    filter: contrast(1.3) brightness(0.8) saturate(0.8);
    transition: filter 0.15s ease, transform 0.15s ease;
    display: block;
  }

  #trump-click:hover {
    filter: contrast(1.5) brightness(1) saturate(0.6) drop-shadow(0 0 18px #ff0000);
    transition: 750ms;
    transform: scale(1.04);
  }

  #trump-click:active {
    transform: scale(0.97);
  }

  #click-hint {
    font-family: 'Share Tech Mono', monospace;
    font-size: clamp(10px, 1.4vw, 14px);
    color: #ff0000;
    letter-spacing: 5px;
    text-shadow: 0 0 8px #ff0000;
    animation: blink 1.2s step-end infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50%       { opacity: 0; }
  }

  /* ══════════════════════════════
     BLACK WAIT SCREEN
  ══════════════════════════════ */
  #blackscreen {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
  }

  #cursor-text {
    font-family: 'Share Tech Mono', monospace;
    color: #1a1a1a;
    font-size: 13px;
    letter-spacing: 4px;
    user-select: none;
  }

  /* ══════════════════════════════
     IMAGE LAYERS
  ══════════════════════════════ */
  .img-layer {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    opacity: 0;
  }

  .img-layer img {
    height: 100vh;
    width: auto;
    max-width: 100vw;
    object-fit: contain;
    display: block;
    position: relative;
    z-index: 2;
    filter: contrast(1.4) brightness(0.75) saturate(0.85);
  }

  .img-layer::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 35% 80% at 0% 50%,   rgba(140,0,0,0.25) 0%, transparent 70%),
      radial-gradient(ellipse 35% 80% at 100% 50%,  rgba(140,0,0,0.25) 0%, transparent 70%);
    pointer-events: none;
    z-index: 1;
  }

  #layer-shocked { z-index: 5; }
  #layer-salute  { z-index: 4; }
  #layer-back    { z-index: 3; }

  /* ══════════════════════════════
     FLAG VIDEO
  ══════════════════════════════ */
  #flag-video {
    position: fixed;
    inset: 0;
    z-index: 1;
    opacity: 0;
  }
  #flag-video video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.65) saturate(1.2);
  }

  /* ══════════════════════════════
     OVERLAYS
  ══════════════════════════════ */
  #fade-black {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 50;
    opacity: 0;
    pointer-events: none;
  }

  #flash {
    position: fixed;
    inset: 0;
    background: #fff;
    z-index: 200;
    opacity: 0;
    pointer-events: none;
  }

  #scanlines {
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent, transparent 2px,
      rgba(255,0,0,0.04) 2px, rgba(255,0,0,0.04) 4px
    );
    z-index: 6;
    pointer-events: none;
    opacity: 0;
  }

  #vignette {
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 30%, #000 100%);
    z-index: 8;
    opacity: 0;
    pointer-events: none;
  }

  /* ══════════════════════════════
     GLITCH BURST (jumpscare)
  ══════════════════════════════ */
  #glitch-img {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 7;
    opacity: 0;
    pointer-events: none;
  }
  #glitch-img img {
    height: 100vh;
    width: auto;
    max-width: 100vw;
    object-fit: contain;
    filter: hue-rotate(90deg) contrast(3) saturate(4) brightness(0.8);
  }
  @keyframes glitch {
    0%   { clip-path: inset(0 0 92% 0);   transform: translate(-12px, 0); }
    20%  { clip-path: inset(25% 0 55% 0); transform: translate(12px, 0); }
    40%  { clip-path: inset(60% 0 18% 0); transform: translate(-6px, 0); }
    60%  { clip-path: inset(8% 0 78% 0);  transform: translate(6px, 0); }
    80%  { clip-path: inset(78% 0 4% 0);  transform: translate(-12px, 0); }
    100% { clip-path: inset(0 0 0 0);     transform: translate(0, 0); }
  }

  /* ══════════════════════════════
     CT-BACK BOTTOM TITLE
  ══════════════════════════════ */
  #text-overlay {
    position: fixed;
    bottom: 4vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9;
    text-align: center;
    opacity: 0;
    pointer-events: none;
    white-space: nowrap;
  }
  #text-overlay h1 {
    font-family: 'Black Han Sans', sans-serif;
    font-size: clamp(44px, 9vw, 130px);
    color: #ff0000;
    text-shadow:
      0 0 20px #ff0000,
      0 0 60px #ff000077,
      3px 3px 0 #000,
      -3px -3px 0 #000;
    letter-spacing: -2px;
    line-height: 1;
  }
  #text-overlay p {
    font-family: 'Share Tech Mono', monospace;
    font-size: clamp(10px, 1.5vw, 15px);
    color: #fff;
    letter-spacing: 7px;
    margin-top: 8px;
    text-shadow: 0 0 12px #ff0000;
  }

  /* ══════════════════════════════
     FINAL TITLE SCREEN
  ══════════════════════════════ */
  #final-screen {
    position: fixed;
    inset: 0;
    z-index: 90;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
  }

  #final-h1 {
    font-family: 'Black Han Sans', sans-serif;
    font-size: clamp(55px, 13vw, 185px);
    color: #ff0000;
    text-shadow:
      0 0 30px #ff0000,
      0 0 80px #ff000077,
      4px 4px 0 #000,
      -4px -4px 0 #000;
    letter-spacing: -2px;
    line-height: 1;
    text-align: center;
    position: relative;
  }

  #final-p {
    font-family: 'Share Tech Mono', monospace;
    font-size: clamp(10px, 1.8vw, 20px);
    color: #fff;
    letter-spacing: 8px;
    margin-top: 14px;
    text-shadow: 0 0 14px #ff0000;
    text-align: center;
    position: relative;
  }

  /* glitch — disappear/reappear style like opening, no pseudo elements needed */
  #final-h1.glitching {
    animation: finalGlitch 0.12s steps(1) infinite;
  }
  #final-p.glitching {
    animation: finalGlitch 0.18s steps(1) infinite;
  }

  @keyframes finalGlitch {
    0%   { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
    10%  { opacity: 0; clip-path: inset(20% 0 60% 0); transform: translate(-8px, 0); }
    20%  { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
    35%  { opacity: 0; clip-path: inset(70% 0 10% 0); transform: translate(8px, 0); }
    45%  { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
    55%  { opacity: 0; clip-path: inset(40% 0 40% 0); transform: translate(-5px, 0); }
    65%  { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
    80%  { opacity: 0; clip-path: inset(5% 0 85% 0);  transform: translate(5px, 0); }
    90%  { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
    100% { opacity: 1; clip-path: inset(0 0 0 0);    transform: translate(0, 0); }
  }

  /* scanlines on final screen */
  #final-scanlines {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent, transparent 3px,
      rgba(0,0,0,0.25) 3px, rgba(0,0,0,0.25) 4px
    );
    pointer-events: none;
  }
</style>
</head>
<body>

<!-- ── ACTIVATE SCREEN ── -->
<div id="activate-screen">
  <h1 id="activate-title">ACTIVATE CYBERTRUMP</h1>
  <div id="trump-click-wrap">
    <img id="trump-click" src="trump.png" alt="Trump">
    <p id="click-hint">[ CLICK TO ACTIVATE ]</p>
  </div>
</div>

<!-- ── BLACK WAIT SCREEN ── -->
<div id="blackscreen">
  <span id="cursor-text">· · ·</span>
</div>

<div id="flash"></div>
<div id="fade-black"></div>

<!-- Flag video -->
<div id="flag-video">
  <video autoplay loop muted playsinline>
    <source src="flag.mp4" type="video/mp4">
  </video>
</div>

<!-- Image layers back to front -->
<div class="img-layer" id="layer-back">
  <img src="CT-Back.png" alt="CYBERTRUMP back">
</div>
<div class="img-layer" id="layer-salute">
  <img src="CT-Hand.png" alt="CYBERTRUMP salute">
</div>
<div class="img-layer" id="layer-shocked">
  <img src="CT-Shocked.png" alt="CYBERTRUMP shocked">
</div>

<div id="glitch-img">
  <img src="CT-Shocked.png" alt="">
</div>

<div id="scanlines"></div>
<div id="vignette"></div>

<!-- CT-Back bottom title -->
<div id="text-overlay">
  <h1>CYBERTRUMP</h1>
  <p>MAKE AMERICA GREAT AGAIN</p>
</div>

<!-- Final full-screen title -->
<div id="final-screen">
  <div id="final-scanlines"></div>
  <h1 id="final-h1">CYBERTRUMP</h1>
  <p id="final-p">MAKE AMERICA GREAT AGAIN</p>
</div>

<!-- ── TEST BUTTON (remove before publishing) ── -->
<button id="test-btn" onclick="
  document.getElementById('activate-screen').style.display='none';
  document.getElementById('blackscreen').style.opacity='0';
  document.getElementById('layer-back').style.opacity='1';
  document.getElementById('flag-video').style.opacity='1';
  document.getElementById('scanlines').style.opacity='1';
  document.getElementById('vignette').style.opacity='1';
  document.getElementById('text-overlay').style.opacity='1';
  document.getElementById('text-overlay').style.bottom='6vh';
  const a = document.getElementById('anthem');
  a.currentTime = Math.max(0, a.duration - 6 || 0);
  a.volume = 1; a.play();
" style="position:fixed;bottom:10px;right:10px;z-index:9999;background:#ff0000;color:#fff;font-family:monospace;font-size:11px;padding:6px 10px;border:none;cursor:pointer;opacity:0.7;letter-spacing:2px;">
  TEST ENDING
</button>

<audio id="anthem"     src="anthem.ogg"     preload="auto"></audio>
<audio id="eagle"      src="eagle.mp3"       preload="auto"></audio>
<audio id="jumpscare"  src="jumpscare.mp3"   preload="auto"></audio>

<script>
  const activateScreen = document.getElementById('activate-screen');
  const trumpClick     = document.getElementById('trump-click-wrap');
  const blackscreen    = document.getElementById('blackscreen');
  const flash          = document.getElementById('flash');
  const fadeBlack      = document.getElementById('fade-black');
  const layerShocked   = document.getElementById('layer-shocked');
  const layerSalute    = document.getElementById('layer-salute');
  const layerBack      = document.getElementById('layer-back');
  const flagVideo      = document.getElementById('flag-video');
  const glitchImg      = document.getElementById('glitch-img');
  const scanlines      = document.getElementById('scanlines');
  const vignette       = document.getElementById('vignette');
  const textOverlay    = document.getElementById('text-overlay');
  const finalScreen    = document.getElementById('final-screen');
  const finalH1        = document.getElementById('final-h1');
  const finalP         = document.getElementById('final-p');
  const anthem         = document.getElementById('anthem');
  const eagle          = document.getElementById('eagle');
  const jumpscare      = document.getElementById('jumpscare');
  const body           = document.body;

  function fade(el, to, ms) {
    el.style.transition = ms ? `opacity ${ms}ms ease` : 'none';
    el.style.opacity = to;
  }

  function fadeInAudio(audio, duration) {
    audio.volume = 0;
    audio.play().catch(() => {});
    const steps = 60;
    const interval = duration / steps;
    let step = 0;
    const timer = setInterval(() => {
      step++;
      audio.volume = Math.min(step / steps, 1);
      if (step >= steps) clearInterval(timer);
    }, interval);
  }

  function fadeToBlack(hideLayer, showLayer, duration, onDone, showFlag, hideFlag) {
    const half = duration / 2;
    fade(fadeBlack, 1, half);
    setTimeout(() => {
      if (hideLayer) hideLayer.style.opacity = '0';
      if (hideFlag)  { flagVideo.style.transition = 'none'; flagVideo.style.opacity = '0'; }
      if (showFlag)  { flagVideo.style.transition = 'none'; flagVideo.style.opacity = '1'; }
      if (showLayer) showLayer.style.opacity = '1';
      fade(fadeBlack, 0, half);
      setTimeout(() => { if (onDone) onDone(); }, half);
    }, half);
  }

  // ── ANTHEM TIMING: triggers fade to salute 2s before anthem ends ──
  anthem.addEventListener('timeupdate', () => {
    if (!anthem._eagleTriggered && anthem.duration &&
        anthem.currentTime >= anthem.duration - 2) {
      anthem._eagleTriggered = true;
      triggerEnding();
    }
  });

  function triggerEnding() {
    const half = 400; // fast fade — 800ms total

    // Fade text overlay out immediately and quickly (#2)
    fade(textOverlay, 0, 300);

    // Crossfade CT-Back → CT-Hand directly, flag untouched underneath
    layerSalute.style.opacity = '1';
    layerSalute.style.zIndex = '4';
    layerBack.style.transition = 'opacity 800ms ease';
    layerBack.style.opacity = '0';

    // Eagle plays as salute fades in
    eagle.play().catch(() => {});

    // After eagle finishes → fade to final title
    setTimeout(() => {
        fade(fadeBlack, 1, half);
        setTimeout(() => {
          layerSalute.style.opacity = '0';
          flagVideo.style.opacity = '0';
          finalScreen.style.background = '#000';
          finalScreen.style.opacity = '1';
          finalScreen.style.pointerEvents = 'auto';
          fade(fadeBlack, 0, half);

          // Glitch both title and subtitle, then settle (#4)
          finalH1.classList.add('glitching');
          finalP.classList.add('glitching');
          setTimeout(() => {
            finalH1.classList.remove('glitching');
            finalP.classList.remove('glitching');
          }, 1400);

        }, half);
      }, 3500); // eagle is ~3.5s effective

  }

  function startSequence() {
    activateScreen.style.transition = 'opacity 0.4s ease';
    activateScreen.style.opacity = '0';
    setTimeout(() => activateScreen.style.display = 'none', 400);

    blackscreen.style.transition = 'none';
    blackscreen.style.opacity = '1';
    blackscreen.style.pointerEvents = 'none';

    const cursorText = document.getElementById('cursor-text');
    cursorText.style.transition = 'opacity 1s ease, color 1s ease';
    setTimeout(() => {
      cursorText.style.opacity = '1';
      cursorText.style.color = '#222';
    }, 300);

    setTimeout(() => {

      // 1. White flash
      fade(flash, 1, 50);
      setTimeout(() => fade(flash, 0, 150), 80);

      // 2. Slam shocked in + jumpscare sound
      blackscreen.style.transition = 'opacity 0.05s';
      blackscreen.style.opacity = '0';
      layerShocked.style.opacity = '1';
      jumpscare.play().catch(() => {});

      // 3. Shake
      body.style.animation = 'shake 0.5s ease forwards';
      setTimeout(() => body.style.animation = '', 500);

      // 4. Glitch burst
      glitchImg.style.opacity = '1';
      glitchImg.style.animation = 'glitch 0.32s steps(1) forwards';
      setTimeout(() => { glitchImg.style.opacity = '0'; glitchImg.style.animation = ''; }, 340);

      // 5. Second flash
      setTimeout(() => {
        fade(flash, 0.65, 30);
        setTimeout(() => fade(flash, 0, 200), 55);
      }, 160);

      // 6. Scanlines + vignette
      setTimeout(() => {
        fade(scanlines, 1, 400);
        fade(vignette, 1, 900);
      }, 400);

      // 7. Hold on shocked → fade to black → CT-Back + flag
      setTimeout(() => {
        fadeToBlack(layerShocked, layerBack, 1400, () => {

          // Anthem fades in over 2s
          fadeInAudio(anthem, 2000);

          // Title fades in at bottom
          setTimeout(() => {
            textOverlay.style.transition = 'opacity 1.6s ease, bottom 1.6s ease';
            textOverlay.style.opacity = '1';
            textOverlay.style.bottom = '6vh';
          }, 400);

          // Anthem timeupdate listener handles everything after this

        }, true); // showFlag = true
      }, 2200);

    }, 3500);
  }

  // shake keyframes need to be in CSS but body.style.animation refs them
  const shakeStyle = document.createElement('style');
  shakeStyle.textContent = `
    @keyframes shake {
      0%   { transform: translate(0,0) rotate(0deg); }
      10%  { transform: translate(-30px,-20px) rotate(-2deg); }
      20%  { transform: translate(30px,20px) rotate(2deg); }
      30%  { transform: translate(-25px,25px) rotate(-1.5deg); }
      40%  { transform: translate(25px,-25px) rotate(1.5deg); }
      50%  { transform: translate(-15px,15px) rotate(-2deg); }
      60%  { transform: translate(15px,-10px) rotate(2deg); }
      70%  { transform: translate(-10px,10px) rotate(-1deg); }
      80%  { transform: translate(10px,-5px) rotate(1deg); }
      90%  { transform: translate(-5px,5px) rotate(0deg); }
      100% { transform: translate(0,0) rotate(0deg); }
    }
  `;
  document.head.appendChild(shakeStyle);

  trumpClick.addEventListener('click', startSequence);
</script>
</body>
</html>
